# ComfyUI Wildcards Generator 插件

一个用于ComfyUI的提示词管理插件，提供两个核心功能节点：字符串保存和随机抽取提示词。

## 功能介绍

### 1. 字符串保存节点（字符串保存节点）

该节点用于接收任何类型的字符串输入，在节点下方实时展示内容，并将其保存到指定路径的文本文件中。

#### 功能特点
- 支持多行文本输入和连接其他节点的字符串输出
- 实时在节点下方展示处理后的内容
- 支持两种保存模式：
  - **single_file**：每次执行保存为新文件，自动添加累计数字后缀
  - **wildcards_format**：汇总保存到同一文件，每行一组提示词
- 自动创建不存在的保存路径
- 支持多种输入类型自动转换（字符串、字典、列表等）
- 详细的转换信息和错误提示

#### 使用方法
1. 将节点添加到工作流
2. 连接输入文本或直接在文本框中输入内容
3. 设置保存路径、文件名和保存模式
4. 执行节点，查看实时展示的内容
5. 在指定路径查看保存的文件

### 2. 随机抽取提示词节点（随机抽取提示词）

从wildcards格式的文本文件中随机抽取指定数量的提示词，并可选择添加固定前缀。

#### 功能特点
- 支持从本地wildcards文件中随机抽取提示词
- 可设置抽取数量（1-100个）
- 支持随机种子设置，便于复现结果
- 可添加固定提示词前缀
- 支持多行输出，每个抽取的提示词单独一行
- 完善的错误处理和提示

#### 使用方法
1. 将节点添加到工作流
2. 选择包含wildcards的文本文件
3. 设置要抽取的提示词数量
4. 可选：设置随机种子（0表示随机）
5. 可选：添加固定提示词前缀
6. 执行节点，获取随机抽取的提示词
7. 将输出连接到生成图像等节点使用

## 安装方法

### 方法1：通过ComfyUI管理器安装
1. 打开ComfyUI管理器
2. 搜索"Wildcards Generator"
3. 点击安装

### 方法2：手动安装
1. 下载本插件的压缩包
2. 解压到ComfyUI的`custom_nodes`目录下
3. 重启ComfyUI

## 目录结构

```
Wildcards-Generator/
├── README.md              # 插件说明文档
├── __init__.py            # 插件初始化文件
└── wildcards_generator/
    ├── __init__.py        # 模块初始化文件
    └── nodes.py           # 节点实现文件
```

## 使用示例

### 示例1：保存反推提示词
1. 连接图像反推节点的输出到"字符串保存节点"
2. 设置保存路径为`E:/Project1/Wildcards-Generator/prompts`
3. 选择保存模式为`wildcards_format`
4. 执行后，反推的提示词将被保存到指定文件

### 示例2：随机生成提示词
1. 准备一个包含多种风格提示词的wildcards文件
2. 使用"随机抽取提示词"节点加载该文件
3. 设置抽取数量为5
4. 添加固定前缀"high quality, masterpiece, "
5. 执行后，将生成5个带有固定前缀的随机风格提示词
6. 连接到图像生成节点，生成不同风格的图像

## 注意事项

1. 确保保存路径有写入权限
2. wildcards文件应为纯文本文件，每行一个提示词
3. 随机种子为0时每次执行结果不同，设置固定种子可复现结果
4. 字符串保存节点支持多种输入类型，会自动尝试提取有意义的内容
5. 建议定期备份生成的wildcards文件

## 版本历史

### v1.0.0
- 初始版本
- 实现字符串保存节点
- 实现随机抽取提示词节点
- 支持多种保存模式
- 支持随机种子设置

## 许可证

MIT License

## 作者

ComfyUI Wildcards Generator 插件开发团队